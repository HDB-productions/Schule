<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <title>Koordinatensystem Generator</title>
    <style>
      :root {
        color-scheme: light;
      }
      body {
        font-family: "Segoe UI", Tahoma, sans-serif;
        margin: 0;
        padding: 2rem;
        background: #f5f5f5;
        color: #1f1f1f;
      }
      h1 {
        margin-top: 0;
        margin-bottom: 1rem;
        font-size: 1.75rem;
      }
      main {
        max-width: 1200px;
        margin: 0 auto;
        display: grid;
        gap: 1.5rem;
      }
      form {
        display: grid;
        gap: 1rem;
      }
      fieldset {
        border: 1px solid #c9c9c9;
        border-radius: 0.5rem;
        padding: 1rem;
        background: #ffffff;
      }
      details.top-section {
        border: 1px solid #c9c9c9;
        border-radius: 0.5rem;
        padding: 0.8rem 1rem 1rem;
        background: #ffffff;
      }
      details.top-section + details.top-section {
        margin-top: 0.1rem;
      }
      details.top-section > summary {
        cursor: pointer;
        font-weight: 700;
        user-select: none;
        font-size: 1.02rem;
      }
      details.top-section > .section-body {
        margin-top: 0.75rem;
      }
      details.subsection {
        border: 1px solid #dddddd;
        border-radius: 0.45rem;
        background: #fcfcfc;
        padding: 0.6rem 0.75rem 0.75rem;
      }
      details.subsection + details.subsection {
        margin-top: 0.65rem;
      }
      details.subsection > summary {
        cursor: pointer;
        font-weight: 600;
        user-select: none;
      }
      details.subsection > .field-grid {
        margin-top: 0.65rem;
      }
      .subgroup + .subgroup {
        margin-top: 0.75rem;
        padding-top: 0.75rem;
        border-top: 1px solid #e2e2e2;
      }
      .subgroup-title {
        margin: 0 0 0.55rem;
        font-size: 0.93rem;
        font-weight: 600;
      }
      legend {
        font-weight: 600;
        padding: 0 0.5rem;
      }
      .field-grid {
        display: grid;
        gap: 0.75rem;
        grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      }
      label {
        display: flex;
        flex-direction: column;
        gap: 0.35rem;
        font-size: 0.95rem;
      }
      input[type="number"] {
        padding: 0.4rem 0.5rem;
        border-radius: 0.4rem;
        border: 1px solid #bdbdbd;
        font-size: 0.95rem;
      }
      input[type="text"],
      select {
        padding: 0.4rem 0.5rem;
        border-radius: 0.4rem;
        border: 1px solid #bdbdbd;
        font-size: 0.95rem;
        background: #ffffff;
        color: #1f1f1f;
      }
      input[type="number"],
      textarea {
        color: #1f1f1f;
      }
      input::placeholder,
      textarea::placeholder {
        color: #666666;
      }
      input[type="color"] {
        padding: 0;
        border: none;
        background: none;
        height: 2rem;
        width: 100%;
      }
      .object-panel {
        border: 1px dashed #bdbdbd;
        border-radius: 0.4rem;
        padding: 0.75rem;
        background: #fafafa;
      }
      #object-list {
        list-style: none;
        margin: 0;
        padding: 0;
        display: grid;
        gap: 0.5rem;
      }
      #object-list li {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.6rem;
        border: 1px solid #dddddd;
        border-radius: 0.4rem;
        padding: 0.5rem 0.65rem;
        background: #ffffff;
      }
      button.small {
        padding: 0.35rem 0.65rem;
        font-size: 0.85rem;
      }
      .actions {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
      }
      button {
        padding: 0.6rem 1.2rem;
        border-radius: 0.5rem;
        border: 1px solid #0f62fe;
        background: #0f62fe;
        color: #ffffff;
        font-size: 1rem;
        cursor: pointer;
      }
      button.secondary {
        background: transparent;
        color: #0f62fe;
      }
      #preview {
        background: #ffffff;
        border: 1px solid #c9c9c9;
        border-radius: 0.5rem;
        padding: 1rem;
      }
      #preview svg {
        width: 100%;
        height: auto;
        display: block;
        border: 1px solid #dddddd;
        background: #ffffff;
      }
      textarea {
        width: 100%;
        min-height: 160px;
        border-radius: 0.5rem;
        border: 1px solid #c9c9c9;
        padding: 0.75rem;
        font-family: "Fira Code", "Cascadia Code", monospace;
        font-size: 0.9rem;
        background: #ffffff;
      }
      .info-card {
        border: 1px solid #c9c9c9;
        border-radius: 0.5rem;
        background: #ffffff;
        padding: 0.9rem 1rem;
      }
      .info-card p {
        margin: 0.35rem 0;
      }
      .inline-code {
        font-family: "Fira Code", "Cascadia Code", monospace;
        font-size: 0.9em;
        background: #f1f3f5;
        padding: 0.05rem 0.25rem;
        border-radius: 0.25rem;
      }
      .settings-toolbar {
        display: flex;
        justify-content: flex-end;
        margin-bottom: 0.5rem;
      }
      @media (max-width: 700px) {
        body {
          padding: 1.25rem;
        }
      }
    </style>
  </head>
  <body>
    <main>
      <header>
        <h1>Koordinatensystem Generator</h1>
        <p>
          Passe die Parameter an, um ein Koordinatensystem im SVG-Format zu
          erzeugen. Alle Laengenangaben beziehen sich auf Millimeter (mm).
        </p>
      </header>
      <section class="info-card" aria-label="Hinweise zur Nutzung">
        <p>
          Zweck 1: SVG in dieser Seite erzeugen, Vorschau pruefen und mit
          <span class="inline-code">SVG speichern</span> exportieren.
        </p>
        <p>
          Zweck 2: Einstellungen vorbereiten und mit
          <span class="inline-code">Funktionsaufruf exportieren</span> den Code
          fuer eine andere Webseite erzeugen.
        </p>
        <p>
          Wichtig: In dieser Generator-Seite wird die Vorschau standardmaessig in
          das Element <span class="inline-code">#preview</span> gerendert. Im
          exportierten Beispiel bestimmst du das Ziel-Element auf deiner Seite
          selbst (z.B. <span class="inline-code">#mein-svg-ziel</span>).
        </p>
        <p>
          Falls du die komplette UI in eine andere Seite einbindest, kannst du
          das Vorschau-Ziel beim Start ueber
          <span class="inline-code">previewId</span> oder
          <span class="inline-code">preview</span> an
          <span class="inline-code">initKoordinatensystemGenerator(...)</span>
          uebergeben.
        </p>
      </section>
      <form id="config-form">
        <div class="settings-toolbar">
          <button type="button" class="secondary" id="toggle-settings-panels">
            Alle Bereiche zuklappen
          </button>
        </div>
        <details class="top-section" open>
          <summary>Grundgroesse</summary>
          <div class="section-body">
            <div class="field-grid">
            <label>
              Gesamtbreite (mm)
              <input
                type="number"
                name="width"
                min="10"
                step="1"
                value="150"
                required
              />
            </label>
            <label>
              Gesamthoehe (mm)
              <input
                type="number"
                name="height"
                min="10"
                step="1"
                value="150"
                required
              />
            </label>
            <label>
              Rand (mm)
              <input
                type="number"
                name="margin"
                min="0"
                step="0.5"
                value="10"
                required
              />
            </label>
            <label>
              Hintergrundfarbe
              <input type="color" name="background" value="#ffffff" />
            </label>
            </div>
          </div>
        </details>
        <details class="top-section">
          <summary>Gitter</summary>
          <div class="section-body">
          <details class="subsection" open>
            <summary>Grobes Gitter</summary>
            <div class="field-grid">
              <label>
                Grobes Gitter aktiv
                <input type="checkbox" name="showMajor" checked />
              </label>
              <label>
                Abstand (mm)
                <input
                  type="number"
                  name="majorSpacing"
                  min="0"
                  step="1"
                  value="5"
                />
              </label>
              <label>
                Linienbreite (mm)
                <input
                  type="number"
                  name="majorStroke"
                  min="0"
                  step="0.05"
                  value="0.05"
                />
              </label>
              <label>
                Linienfarbe
                <input type="color" name="majorColor" value="#9b9b9b" />
              </label>
            </div>
          </details>
          <details class="subsection">
            <summary>Feines Gitter</summary>
            <div class="field-grid">
              <label>
                Feines Gitter aktiv
                <input type="checkbox" name="showMinor" checked />
              </label>
              <label>
                Abstand (mm)
                <input
                  type="number"
                  name="minorSpacing"
                  min="0"
                  step="0.5"
                  value="1"
                />
              </label>
              <label>
                Linienbreite (mm)
                <input
                  type="number"
                  name="minorStroke"
                  min="0"
                  step="0.05"
                  value="0.05"
                />
              </label>
              <label>
                Linienfarbe
                <input type="color" name="minorColor" value="#d0d0d0" />
              </label>
            </div>
          </details>
          </div>
        </details>
        <details class="top-section">
          <summary>Achsen</summary>
          <div class="section-body">
            <details class="subsection" open>
              <summary>Allgemein</summary>
              <div class="field-grid">
                <label>
                  Linienbreite (mm)
                  <input
                    type="number"
                    name="axisStroke"
                    min="0"
                    step="0.05"
                    value="0.1"
                  />
                </label>
                <label>
                  Linienfarbe
                  <input type="color" name="axisColor" value="#000000" />
                </label>
                <label>
                  Pfeilgroesse (mm)
                  <input
                    type="number"
                    name="arrowSize"
                    min="0"
                    step="0.5"
                    value="2"
                  />
                </label>
                <label>
                  X-Achse anzeigen
                  <input type="checkbox" name="showXAxis" checked />
                </label>
                <label>
                  Y-Achse anzeigen
                  <input type="checkbox" name="showYAxis" checked />
                </label>
              </div>
            </details>
            <details class="subsection">
              <summary>Achsenmarkierungen</summary>
              <div class="subgroup">
                <p class="subgroup-title">Markierungen</p>
                <div class="field-grid">
                  <label>
                    Markierungen anzeigen
                    <input type="checkbox" name="showTicks" checked />
                  </label>
                  <label>
                    Markierungsabstand X (mm)
                    <input
                      type="number"
                      name="tickSpacingX"
                      min="0"
                      step="0.5"
                      value="10"
                    />
                  </label>
                  <label>
                    Wertschritt X (Einheiten)
                    <input
                      type="number"
                      name="tickValueStepX"
                      min="0"
                      step="0.5"
                      value="1"
                    />
                  </label>
                  <label>
                    Markierungsabstand Y (mm)
                    <input
                      type="number"
                      name="tickSpacingY"
                      min="0"
                      step="0.5"
                      value="10"
                    />
                  </label>
                  <label>
                    Wertschritt Y (Einheiten)
                    <input
                      type="number"
                      name="tickValueStepY"
                      min="0"
                      step="0.5"
                      value="1"
                    />
                  </label>
                  <label>
                    Markierungslaenge (mm)
                    <input
                      type="number"
                      name="tickLength"
                      min="0"
                      step="0.5"
                      value="2"
                    />
                  </label>
                  <label>
                    Markierungsstaerke (mm)
                    <input
                      type="number"
                      name="tickStroke"
                      min="0"
                      step="0.05"
                      value="0.1"
                    />
                  </label>
                  <label>
                    Markierungsfarbe
                    <input type="color" name="tickColor" value="#000000" />
                  </label>
                </div>
              </div>
              <div class="subgroup">
                <p class="subgroup-title">Beschriftung</p>
                <div class="field-grid">
                  <label>
                    Beschriftung anzeigen
                    <input type="checkbox" name="showTickLabels" checked />
                  </label>
                  <label>
                    Zahlenabstand (mm)
                    <input
                      type="number"
                      name="tickLabelOffset"
                      min="0"
                      step="0.5"
                      value="2"
                    />
                  </label>
                  <label>
                    Schriftgroesse (mm)
                    <input
                      type="number"
                      name="tickLabelFontSize"
                      min="0"
                      step="0.5"
                      value="1"
                    />
                  </label>
                  <label>
                    Schriftfarbe
                    <input type="color" name="tickLabelColor" value="#000000" />
                  </label>
                </div>
              </div>
            </details>
            <details class="subsection" open>
              <summary>Achsenlabels</summary>
              <div class="field-grid">
                <label>
                  Label x-Achse
                  <input type="text" name="axisLabelX" value="x" />
                </label>
                <label>
                  Label y-Achse
                  <input type="text" name="axisLabelY" value="y" />
                </label>
                <label>
                  x-Label anzeigen
                  <input type="checkbox" name="showXAxisLabel" checked />
                </label>
                <label>
                  y-Label anzeigen
                  <input type="checkbox" name="showYAxisLabel" checked />
                </label>
                <label>
                  Labelgroesse (mm)
                  <input
                    type="number"
                    name="axisLabelFontSize"
                    min="0"
                    step="0.1"
                    value="1.5"
                  />
                </label>
                <label>
                  Labelfarbe
                  <input type="color" name="axisLabelColor" value="#000000" />
                </label>
                <label>
                  x-Label Offset X (mm)
                  <input
                    type="number"
                    name="xAxisLabelOffsetX"
                    step="0.5"
                    value="6"
                  />
                </label>
                <label>
                  x-Label Offset Y (mm)
                  <input
                    type="number"
                    name="xAxisLabelOffsetY"
                    step="0.5"
                    value="2"
                  />
                </label>
                <label>
                  y-Label Offset X (mm)
                  <input
                    type="number"
                    name="yAxisLabelOffsetX"
                    step="0.5"
                    value="-3.5"
                  />
                </label>
                <label>
                  y-Label Offset Y (mm)
                  <input
                    type="number"
                    name="yAxisLabelOffsetY"
                    step="0.5"
                    value="8"
                  />
                </label>
              </div>
            </details>
            <details class="subsection">
              <summary>Ursprung</summary>
              <div class="field-grid">
                <label>
                  Ursprung X ab linkem Innenrand (mm)
                  <input
                    type="number"
                    name="originOffsetX"
                    step="0.5"
                    value="0"
                  />
                </label>
                <label>
                  Ursprung Y ab unterem Innenrand (mm)
                  <input
                    type="number"
                    name="originOffsetY"
                    step="0.5"
                    value="0"
                  />
                </label>
              </div>
            </details>
          </div>
        </details>
        <details class="top-section">
          <summary>Dynamische Objekte</summary>
          <div class="section-body">
            <div class="field-grid">
            <label>
              Objekttyp
              <select name="objectType">
                <option value="point">Punkt</option>
                <option value="line">Strecke</option>
                <option value="function">Funktion</option>
                <option value="area">Flaeche</option>
              </select>
            </label>
            <label>
              Objektname
              <input type="text" name="objectName" value="" placeholder="z.B. P1 oder f_oben" />
            </label>
            <label>
              Farbe
              <input type="color" name="objectColor" value="#d81b60" />
            </label>
            <label>
              Beschriftungsgroesse (mm)
              <input
                type="number"
                name="objectLabelFontSize"
                min="0"
                step="0.1"
                value="1.6"
              />
            </label>
            </div>
            <div class="object-panel" data-object-panel="point">
            <div class="field-grid">
              <label>
                Punkt X (Einheit)
                <input type="number" name="pointX" step="0.5" value="1" />
              </label>
              <label>
                Punkt Y (Einheit)
                <input type="number" name="pointY" step="0.5" value="1" />
              </label>
              <label>
                Punktlabel
                <input type="text" name="pointLabel" value="A" />
              </label>
              <label>
                Darstellungsform
                <select name="pointShape">
                  <option value="circle">Kreis</option>
                  <option value="cross">Kreuz diagonal</option>
                  <option value="errorbars">x,y Fehlerbalken</option>
                </select>
              </label>
              <label>
                Punktradius (mm)
                <input
                  type="number"
                  name="pointRadius"
                  min="0"
                  step="0.1"
                  value="1.2"
                />
              </label>
              <label>
                Strichstaerke (mm)
                <input
                  type="number"
                  name="pointStroke"
                  min="0"
                  step="0.05"
                  value="0.2"
                />
              </label>
              <label>
                Fehler x (Einheiten)
                <input type="number" name="pointErrorX" min="0" step="0.1" value="0.5" />
              </label>
              <label>
                Fehler y (Einheiten)
                <input type="number" name="pointErrorY" min="0" step="0.1" value="0.5" />
              </label>
            </div>
          </div>
          <div class="object-panel" data-object-panel="line" hidden>
            <div class="field-grid">
              <label>
                x1
                <input type="number" name="lineX1" step="0.5" value="-2" />
              </label>
              <label>
                y1
                <input type="number" name="lineY1" step="0.5" value="-1" />
              </label>
              <label>
                x2
                <input type="number" name="lineX2" step="0.5" value="3" />
              </label>
              <label>
                y2
                <input type="number" name="lineY2" step="0.5" value="2" />
              </label>
              <label>
                Linienstil
                <select name="lineStyle">
                  <option value="solid">durchgezogen</option>
                  <option value="dashed">gestrichelt</option>
                  <option value="dotted">gepunktet</option>
                </select>
              </label>
              <label>
                Strichstaerke (mm)
                <input
                  type="number"
                  name="lineStroke"
                  min="0"
                  step="0.05"
                  value="0.2"
                />
              </label>
            </div>
          </div>
          <div class="object-panel" data-object-panel="function" hidden>
            <div class="field-grid">
              <label>
                Ausdruck y = f(x)
                <input
                  type="text"
                  name="funcExpression"
                  value="2x^2-3x+1"
                  placeholder="z.B. a*x^n+b*x^(n-1) oder a*b^x oder sin(x)"
                />
              </label>
              <label>
                Parameter (z.B. a=2;b=3;n=4)
                <input type="text" name="funcParameters" value="" />
              </label>
              <label>
                min x
                <input type="number" name="funcMinX" step="0.5" value="-6" />
              </label>
              <label>
                max x
                <input type="number" name="funcMaxX" step="0.5" value="6" />
              </label>
              <label>
                Schrittweite
                <input
                  type="number"
                  name="funcStep"
                  min="0.001"
                  step="0.01"
                  value="0.1"
                />
              </label>
              <label>
                Linienstil
                <select name="funcStyle">
                  <option value="solid">durchgezogen</option>
                  <option value="dashed">gestrichelt</option>
                  <option value="dotted">gepunktet</option>
                </select>
              </label>
              <label>
                Strichstaerke (mm)
                <input
                  type="number"
                  name="funcStroke"
                  min="0"
                  step="0.05"
                  value="0.2"
                />
              </label>
            </div>
          </div>
          <div class="object-panel" data-object-panel="area" hidden>
            <div class="field-grid">
              <label>
                Flaechenmodus
                <select name="areaMode">
                  <option value="polygon">aus Punktfolge</option>
                  <option value="functions">zwischen zwei Funktionen</option>
                </select>
              </label>
              <label>
                Fuellfarbe
                <input type="color" name="areaFillColor" value="#ffcc80" />
              </label>
              <label>
                Fuelltransparenz (0-1)
                <input
                  type="number"
                  name="areaFillOpacity"
                  min="0"
                  max="1"
                  step="0.05"
                  value="0.45"
                />
              </label>
              <label>
                Randlinienstil
                <select name="areaStyle">
                  <option value="solid">durchgezogen</option>
                  <option value="dashed">gestrichelt</option>
                  <option value="dotted">gepunktet</option>
                </select>
              </label>
              <label>
                Punktefolge (x,y; x,y; x,y)
                <input type="text" name="areaPoints" value="-4,-1; -1,2; 2,1; 3,-2" />
              </label>
              <label>
                Untere Funktion y = f(x)
                <input type="text" name="areaLowerExpression" value="x^2-4" />
              </label>
              <label>
                Parameter unten (optional)
                <input type="text" name="areaLowerParameters" value="" />
              </label>
              <label>
                Obere Funktion y = g(x)
                <input type="text" name="areaUpperExpression" value="2x+4" />
              </label>
              <label>
                Parameter oben (optional)
                <input type="text" name="areaUpperParameters" value="" />
              </label>
              <label>
                min x
                <input type="number" name="areaMinX" step="0.5" value="-6" />
              </label>
              <label>
                max x
                <input type="number" name="areaMaxX" step="0.5" value="6" />
              </label>
              <label>
                Schrittweite
                <input
                  type="number"
                  name="areaStep"
                  min="0.001"
                  step="0.01"
                  value="0.1"
                />
              </label>
              <label>
                Strichstaerke (mm)
                <input
                  type="number"
                  name="areaStroke"
                  min="0"
                  step="0.05"
                  value="0.2"
                />
              </label>
            </div>
          </div>
            <div class="actions">
              <button type="button" id="add-object">Objekt hinzufuegen</button>
              <button type="button" class="secondary" id="clear-objects">
                Objekte entfernen
              </button>
            </div>
            <ul id="object-list" aria-live="polite"></ul>
          </div>
        </details>
        <div class="actions">
          <button type="submit">SVG aktualisieren</button>
          <button type="button" class="secondary" id="save-svg">
            SVG speichern
          </button>
          <button type="button" class="secondary" id="export-function-call">
            Funktionsaufruf exportieren
          </button>
        </div>
      </form>
      <section id="preview" aria-live="polite"></section>
      <section>
        <label for="function-call-output">Funktionsaufruf fuer Einbindung</label>
        <textarea
          id="function-call-output"
          readonly
          placeholder="Hier erscheint der exportierte Funktionsaufruf."
        ></textarea>
      </section>
    </main>
    <script src="koordinatensystem-svg.js"></script>
    <script>
      (() => {
        window.koordinatensystemApp = window.initKoordinatensystemGenerator();
      })();
    </script>
  </body>
</html>

