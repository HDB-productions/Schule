<!DOCTYPE html>
<meta charset="utf-8" />
<title>KI-Check</title>
<textarea id="t" style="width: 100%; height: 150px"></textarea><br />
<button id="b">Prüfen</button>
<pre
  id="o"
  style="white-space: pre-wrap; border: 1px solid #ccc; padding: 8px"
></pre>
<script>
  const WORKER_URL = "https://https://dark-band-42a3.hildebrandt.workers.dev/"; // <- anpassen

  document.getElementById("b").onclick = async () => {
    const txt = document.getElementById("t").value.trim();
    const o = document.getElementById("o");
    if (!txt) {
      o.textContent = "Bitte Text eingeben.";
      return;
    }

    o.textContent = "prüfe…";
    try {
      const res = await fetch(WORKER_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          messages: [
            {
              role: "system",
              content:
                "Du bewertest kurz und schülergerecht (Klasse 7). Zuerst Checkliste mit ✅/❌ zu den Aspekten, dann 2–4 Tipps.",
            },
            {
              role: "user",
              content: `Aspekte:
1. Begriffsdefinition in 1–2 Sätzen
2. wichtige Ursachen/Voraussetzungen
3. Ablauf/Prinzip in Reihenfolge
4. ein anschauliches Beispiel
5. korrekte Fachbegriffe
6. kurzes Fazit in einem Satz

Text:
"""${txt}"""
Bitte genau in diesem Format antworten.`,
            },
          ],
        }),
      });
      const data = await res.json();
      if (!res.ok)
        throw new Error(data?.error?.message || JSON.stringify(data));
      o.textContent = data?.choices?.[0]?.message?.content || "Keine Antwort.";
    } catch (e) {
      o.textContent = "Fehler: " + e.message;
    }
  };
</script>
